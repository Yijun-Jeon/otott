# <img src="https://user-images.githubusercontent.com/89140546/265250102-02d8cb2c-e63c-4ab7-b340-6d7c2979817b.png"  height="30"> OTOTT

> 플랫폼 통합 서비스 제공 플랫폼
> <SKKU 웹프로그래밍실습 수업 프로젝트>
> 
## Table Of Contents
* [프로젝트 개요](#프로젝트-개요)
* [설명](#설명)
    * [메인 페이지](#메인-페이지)
    * [메뉴 페이지](#메뉴-페이지)
    * [차트 페이지](#차트-페이지)
    * [작품 페이지](#작품-페이지)
* [세부 특징](#세부-특징)
    * [프론트엔드](#프론트엔드)
    * [백엔드](#백엔드)
* [참고 사이트](#참고-사이트)
* [개발 팀원](#개발-팀원)
***

## 프로젝트 개요
OTOTT란, OTT 플랫폼들의 통합적인 정보를 제공해주는 웹사이트입니다.

넷플릭스, 티빙, 왓챠 등 6곳의 플랫폼 여기저기에 흩어져 있어 원하는 작품을 찾기 불편했던 기존의 문제점을 해결해보고자 기획하게 되었습니다.

따라서 OTOTT 서비스의 목적은, 여러 OTT 작품들을 하나의 웹사이트에서 한눈에 확인할 수 있도록 여러 서비스를 제공해주기 위함입니다.

* 클라이언트 : HTML5 / CSS3 / Javascript
* 로컬서버 : Node.js / Express.js / Javascript

## 설명

OTOTT 웹사이트에서 제공할 서비스는 다음과 같습니다.

* 통합 실시간 순위 차트 제공
* OTT별 / 장르별 차트 별도 제공
* 사용자의 무드에 맞게 흥미를 끄는 주제로 추천해주는 EDITORS PICK 작품들 제공
* 개별 작품의 기본 정보, 별점 및 리뷰 확인 기능 제공
* 개별 작품을 감상 가능한 OTT 플랫폼 리스트 제공

### 메인 페이지
<img src="https://user-images.githubusercontent.com/89140546/265250105-d8a17ecc-6a79-46ae-a97d-a3e74915ae42.gif">


OTOTT 시작 메인 페이지입니다. 소개글 및 목차 페이지와 OTT & 장르 구분없는 통합 인기차트 확인이 가능합니다



### 메뉴 페이지
<img src="https://user-images.githubusercontent.com/89140546/265250242-e5fcb42e-f1de-47da-bc69-d9e9d4d9d8c5.gif">

OTT별, 장르별, Editor‘s pick 목차 별로 간편하게 이동할 수 있는 메뉴 화면입니다.각 Menu 아래의 박스 선택 시, 해당 페이지로 넘어가면서 해당 박스별 순위차트 위치로 자동 스크롤링 됩니다.


### 차트 페이지
<img src="https://user-images.githubusercontent.com/89140546/265250707-b15206f7-347d-4c4f-bca9-0a6c3dbf7203.gif">

시청순 / 평점순으로 OTT별, 장르별 TOP10 순위를 확인할 수 있는 페이지입니다. 키노라이츠의 차트 데이터를 크롤링한 정보가 자동으로 반영됩니다. 페이지 상단 selection-box 클릭 시 해당 item 구간으로 이동합니다.


### 작품 페이지
<img width="279" alt="image" src="https://github.com/Yijun-Jeon/otott/assets/89140546/3a37769d-61ce-47d7-a5d6-3dbada5f0f07">

각 프로그램 정보를 보여주는 페이지입니다. 왓챠피디아 데이터를 크롤링한 정보가 자동으로 반영됩니다.작품의 기본 정보 및 포스터, 별점 그래프, 감상 가능한 곳, 리뷰로 구성되어 있습니다. 

***

## 세부 특징
### 프론트엔드

scroll.js 는 스크롤과 관련한 기능을 구현하고 있습니다.

1. 좌우 스크롤 기능(리스트 페이지)
2. 하단 스크롤 기능(메인 페이지)
3. 하위바 펼치기 기능(리스트 페이지)
4. Top 버튼 기능
5. 페이지 이동 + 스크롤 기능

### 백엔드


1. 크롤링
> 해당 기능은 crawling.js 로 구현했습니다. 
> 라이브러리: Node.js의 ‘selenium’ 사용  

로컬 서버 오픈 전에 데이터를 긁어오는 작업을 수행할 수 있도록 하였습니다.

- 차트 크롤링(키노라이츠)

    차트 크롤링은 ‘키노라이츠’ 웹사이트를 이용하였습니다.
    ‘통합 인기차트 > 넷플릭스 > 티빙 > 웨이브 > 디즈니 > 쿠팡플레이 > 왓챠'
    해당 순서로  키노라이츠 메인 화면에서 각 순위 차트 버튼을 눌러 20위 차트 데이터를 크롤링 하였습니다.
    다만, 이후 적용 시에는 통합 차트 외에 차트는 10개만 보이도록 설정하였습니다.

* 작품 크롤링(왓챠피디아)

    우선적으로 구글 검색으로 ‘작품 명 – 왓챠피디아’로 검색하였습니다.
검색 후 뜨는 상위 3개 안에 왓챠피디아 url을 가진 결과가 있을 경우에만, 정상 진행되도록 하여 다른 사이트 접속을 방지하도록 하였습니다.
없을 경우애는, 처음 시도 버전과 동일하게 왓챠피디아에서 검색 후 나오는 가장 첫번째 작품을 선택하도록 하였습니다.
왓챠피디아에도 없는 작품일 경우, try-catch 문을 통해 dummy data로 저장하도록 하였습니다.

    위의 과정으로 작품 크롤링을 진행한 이유는 단순히 왓챠피디아에서 해당 작품을 검색하여 나오는 가장 첫 작품을 선택하는 방식으로는 1) 원하는 작품이 나오지 않는 경우도 많고, 2) 아예 검색이 안될 경우에는 해당 크롤링이 멈춰버리는 문제가 있었기 때문입니다.
 
    해당 문제를 해결하고자 구글 검색과 dummy data 를 이용하였습니다.

    구글 검색으로 최신 작품을 가져올 수 있게 하고, 해당 방법이 안될 경우에만 왓챠피디아 검색을 통해 가져오는 방식으로 변경하였습니다.

    또한, 왓챠피디아 검색에도 작품 검색이 되지 않는 경우에는

    try-catch 문을 통해 dummy data로 저장하게 하여 크롤링이 멈춰버리는 문제를 해결하고자 하였습니다.

2. 로컬 스토리지에 저장하는 기능
> 긁어온 데이터를 저장하기 위한 json 파일과 localStorage.js 로 구현하였습니다. 

* 로컬 json 파일 데이터
    * products.json : 작품 상세 정보 
    * 한 번 보유한 데이터는 계속 저장이 되어 있는 상태에서, 새로운 데이터가 크롤링될 경우 정보가 json 파일에 누적되어 저장되도록 하였습니다.
    * chart.json : 각 7대 인기차트 작품 간단 정보
    차트 데이터는 크롤링이 실행될 때마다 계속해서 변경되도록 하였습니다.
    * genre.json : 직접 정의한 장르별 인기차트
    장르의 경우에는, 작품 제목만 미리 선정해놓고, 해당 작품의 작품 정보를 크롤링하도록 하였습니다.
    * Editor.json : 직접 정의한 에디터 추천 픽
    Editor 역시, 작품 제목을 선정해놓고, 해당 작품 제목으로 작품 정보를 크롤링하도록 하였습니다.

 3. 로컬 웹 서버
> 로컬 웹 서버를 오픈하고 fetch API를 사용해 접근하도록 하였습니다.

    로컬 스토리지에 데이터를 저장하여 관리할 수 있습니다.

4. 로컬 스토리지에 저장된 데이터를 실제 웹 페이지에 반영
> jQuery 라이브러리 + apply.js로 구현하였습니다.

    각종 차트 및 작품정보 데이터를 html에서 로드할 때, 자동으로 로컬 스토리지 데이터를 읽어서 반영하도록 하였습니다.


***

## 참고 사이트

* 키노라이츠 : https://m.kinolights.com
* 왓챠피디아 : https://pedia.watcha.com/ko-KR
* 넷플릭스 : https://www.netflix.com/kr/
* 티빙 : https://www.tving.com/onboarding
* 왓챠 : https://watcha.com/
* 웨이브 : https://www.wavve.com/
* 쿠팡플레이 : https://www.coupangplay.com/
* 디즈니+ : https://www.disneyplus.com/ko-kr

***

## 개발 팀원

* [전이준](https://github.com/Yijun-Jeon) (성균관대학교)
* [유현지](https://github.com/hyeonnjii) (성균관대학교)
* 이수민 (성균관대학교)
